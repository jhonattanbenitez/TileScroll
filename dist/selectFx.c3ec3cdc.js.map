{"version":3,"sources":["js/selectFx.js"],"names":["window","hasParent","e","p","el","target","srcElement","parentNode","extend","a","b","key","hasOwnProperty","SelectFx","options","_init","prototype","newTab","stickyPlaceholder","onChange","val","selectedOpt","querySelector","hasDefaultPlaceholder","disabled","_createSelectEl","selOpts","slice","call","selEl","querySelectorAll","selOptsCount","length","current","indexOf","selPlaceholder","_initEvents","self","createOptionHTML","optclass","classes","link","foundSelected","getAttribute","value","textContent","children","forEach","tag","tagName","toLowerCase","label","opt","opts_el","document","createElement","className","tabIndex","innerHTML","appendChild","addEventListener","_toggleSelect","idx","_changeOption","ev","_isOpen","keyCode","which","preventDefault","_navigateOpts","preSelCurrent","stopPropagation","dir","tmpcurrent","_removeFocus","classie","add","remove","oldOpt","open","location","has","focusEl"],"mappings":"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","file":"selectFx.c3ec3cdc.js","sourceRoot":"..\\src","sourcesContent":["/**\n * selectFx.js v1.0.0e\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2014, Codrops\n * http://www.codrops.com\n */\n;( function( window ) {\n\t\n\t'use strict';\n\n\t/**\n\t * based on from https://github.com/inuyaksa/jquery.nicescroll/blob/master/jquery.nicescroll.js\n\t */\n\tfunction hasParent( e, p ) {\n\t\tif (!e) return false;\n\t\tvar el = e.target||e.srcElement||e||false;\n\t\twhile (el && el != p) {\n\t\t\tel = el.parentNode||false;\n\t\t}\n\t\treturn (el!==false);\n\t};\n\t\n\t/**\n\t * extend obj function\n\t */\n\tfunction extend( a, b ) {\n\t\tfor( var key in b ) { \n\t\t\tif( b.hasOwnProperty( key ) ) {\n\t\t\t\ta[key] = b[key];\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\n\t/**\n\t * SelectFx function\n\t */\n\tfunction SelectFx( el, options ) {\t\n\t\tthis.el = el;\n\t\tthis.options = extend( {}, this.options );\n\t\textend( this.options, options );\n\t\tthis._init();\n\t}\n\n\t/**\n\t * SelectFx options\n\t */\n\tSelectFx.prototype.options = {\n\t\t// if true all the links will open in a new tab.\n\t\t// if we want to be redirected when we click an option, we need to define a data-link attr on the option of the native select element\n\t\tnewTab : true,\n\t\t// when opening the select element, the default placeholder (if any) is shown\n\t\tstickyPlaceholder : true,\n\t\t// callback when changing the value\n\t\tonChange : function( val ) { return false; }\n\t}\n\n\t/**\n\t * init function\n\t * initialize and cache some vars\n\t */\n\tSelectFx.prototype._init = function() {\n\t\t// check if we are using a placeholder for the native select box\n\t\t// we assume the placeholder is disabled and selected by default\n\t\tvar selectedOpt = this.el.querySelector( 'option[selected]' );\n\t\tthis.hasDefaultPlaceholder = selectedOpt && selectedOpt.disabled;\n\n\t\t// get selected option (either the first option with attr selected or just the first option)\n\t\tthis.selectedOpt = selectedOpt || this.el.querySelector( 'option' );\n\n\t\t// create structure\n\t\tthis._createSelectEl();\n\n\t\t// all options\n\t\tthis.selOpts = [].slice.call( this.selEl.querySelectorAll( 'li[data-option]' ) );\n\t\t\n\t\t// total options\n\t\tthis.selOptsCount = this.selOpts.length;\n\t\t\n\t\t// current index\n\t\tthis.current = this.selOpts.indexOf( this.selEl.querySelector( 'li.cs-selected' ) ) || -1;\n\t\t\n\t\t// placeholder elem\n\t\tthis.selPlaceholder = this.selEl.querySelector( 'span.cs-placeholder' );\n\n\t\t// init events\n\t\tthis._initEvents();\n\t}\n\n\t/**\n\t * creates the structure for the select element\n\t */\n\tSelectFx.prototype._createSelectEl = function() {\n\t\tvar self = this, options = '', createOptionHTML = function(el) {\n\t\t\tvar optclass = '', classes = '', link = '';\n\n\t\t\tif( el.selectedOpt && !this.foundSelected && !this.hasDefaultPlaceholder ) {\n\t\t\t\tclasses += 'cs-selected ';\n\t\t\t\tthis.foundSelected = true;\n\t\t\t}\n\t\t\t// extra classes\n\t\t\tif( el.getAttribute( 'data-class' ) ) {\n\t\t\t\tclasses += el.getAttribute( 'data-class' );\n\t\t\t}\n\t\t\t// link options\n\t\t\tif( el.getAttribute( 'data-link' ) ) {\n\t\t\t\tlink = 'data-link=' + el.getAttribute( 'data-link' );\n\t\t\t}\n\n\t\t\tif( classes !== '' ) {\n\t\t\t\toptclass = 'class=\"' + classes + '\" ';\n\t\t\t}\n\n\t\t\treturn '<li ' + optclass + link + ' data-option data-value=\"' + el.value + '\"><span>' + el.textContent + '</span></li>';\n\t\t};\n\n\t\t[].slice.call( this.el.children ).forEach( function(el) {\n\t\t\tif( el.disabled ) { return; }\n\n\t\t\tvar tag = el.tagName.toLowerCase();\n\n\t\t\tif( tag === 'option' ) {\n\t\t\t\toptions += createOptionHTML(el);\n\t\t\t}\n\t\t\telse if( tag === 'optgroup' ) {\n\t\t\t\toptions += '<li class=\"cs-optgroup\"><span>' + el.label + '</span><ul>';\n\t\t\t\t[].slice.call( el.children ).forEach( function(opt) {\n\t\t\t\t\toptions += createOptionHTML(opt);\n\t\t\t\t} )\n\t\t\t\toptions += '</ul></li>';\n\t\t\t}\n\t\t} );\n\n\t\tvar opts_el = '<div class=\"cs-options\"><ul>' + options + '</ul></div>';\n\t\tthis.selEl = document.createElement( 'div' );\n\t\tthis.selEl.className = this.el.className;\n\t\tthis.selEl.tabIndex = this.el.tabIndex;\n\t\tthis.selEl.innerHTML = '<span class=\"cs-placeholder\">' + this.selectedOpt.textContent + '</span>' + opts_el;\n\t\tthis.el.parentNode.appendChild( this.selEl );\n\t\tthis.selEl.appendChild( this.el );\n\t}\n\n\t/**\n\t * initialize the events\n\t */\n\tSelectFx.prototype._initEvents = function() {\n\t\tvar self = this;\n\n\t\t// open/close select\n\t\tthis.selPlaceholder.addEventListener( 'click', function() {\n\t\t\tself._toggleSelect();\n\t\t} );\n\n\t\t// clicking the options\n\t\tthis.selOpts.forEach( function(opt, idx) {\n\t\t\topt.addEventListener( 'click', function() {\n\t\t\t\tself.current = idx;\n\t\t\t\tself._changeOption();\n\t\t\t\t// close select elem\n\t\t\t\tself._toggleSelect();\n\t\t\t} );\n\t\t} );\n\n\t\t// close the select element if the target it´s not the select element or one of its descendants..\n\t\tdocument.addEventListener( 'click', function(ev) {\n\t\t\tvar target = ev.target;\n\t\t\tif( self._isOpen() && target !== self.selEl && !hasParent( target, self.selEl ) ) {\n\t\t\t\tself._toggleSelect();\n\t\t\t}\n\t\t} );\n\n\t\t// keyboard navigation events\n\t\tthis.selEl.addEventListener( 'keydown', function( ev ) {\n\t\t\tvar keyCode = ev.keyCode || ev.which;\n\n\t\t\tswitch (keyCode) {\n\t\t\t\t// up key\n\t\t\t\tcase 38:\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself._navigateOpts('prev');\n\t\t\t\t\tbreak;\n\t\t\t\t// down key\n\t\t\t\tcase 40:\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself._navigateOpts('next');\n\t\t\t\t\tbreak;\n\t\t\t\t// space key\n\t\t\t\tcase 32:\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tif( self._isOpen() && typeof self.preSelCurrent != 'undefined' && self.preSelCurrent !== -1 ) {\n\t\t\t\t\t\tself._changeOption();\n\t\t\t\t\t}\n\t\t\t\t\tself._toggleSelect();\n\t\t\t\t\tbreak;\n\t\t\t\t// enter key\n\t\t\t\tcase 13:\n\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tif( self._isOpen() && typeof self.preSelCurrent != 'undefined' && self.preSelCurrent !== -1 ) {\n\t\t\t\t\t\tself._changeOption();\n\t\t\t\t\t\tself._toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// esc key\n\t\t\t\tcase 27:\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tif( self._isOpen() ) {\n\t\t\t\t\t\tself._toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * navigate with up/dpwn keys\n\t */\n\tSelectFx.prototype._navigateOpts = function(dir) {\n\t\tif( !this._isOpen() ) {\n\t\t\tthis._toggleSelect();\n\t\t}\n\n\t\tvar tmpcurrent = typeof this.preSelCurrent != 'undefined' && this.preSelCurrent !== -1 ? this.preSelCurrent : this.current;\n\t\t\n\t\tif( dir === 'prev' && tmpcurrent > 0 || dir === 'next' && tmpcurrent < this.selOptsCount - 1 ) {\n\t\t\t// save pre selected current - if we click on option, or press enter, or press space this is going to be the index of the current option\n\t\t\tthis.preSelCurrent = dir === 'next' ? tmpcurrent + 1 : tmpcurrent - 1;\n\t\t\t// remove focus class if any..\n\t\t\tthis._removeFocus();\n\t\t\t// add class focus - track which option we are navigating\n\t\t\tclassie.add( this.selOpts[this.preSelCurrent], 'cs-focus' );\n\t\t}\n\t}\n\n\t/**\n\t * open/close select\n\t * when opened show the default placeholder if any\n\t */\n\tSelectFx.prototype._toggleSelect = function() {\n\t\t// remove focus class if any..\n\t\tthis._removeFocus();\n\t\t\n\t\tif( this._isOpen() ) {\n\t\t\tif( this.current !== -1 ) {\n\t\t\t\t// update placeholder text\n\t\t\t\tthis.selPlaceholder.textContent = this.selOpts[ this.current ].textContent;\n\t\t\t}\n\t\t\tclassie.remove( this.selEl, 'cs-active' );\n\t\t}\n\t\telse {\n\t\t\tif( this.hasDefaultPlaceholder && this.options.stickyPlaceholder ) {\n\t\t\t\t// everytime we open we wanna see the default placeholder text\n\t\t\t\tthis.selPlaceholder.textContent = this.selectedOpt.textContent;\n\t\t\t}\n\t\t\tclassie.add( this.selEl, 'cs-active' );\n\t\t}\n\t}\n\n\t/**\n\t * change option - the new value is set\n\t */\n\tSelectFx.prototype._changeOption = function() {\n\t\t// if pre selected current (if we navigate with the keyboard)...\n\t\tif( typeof this.preSelCurrent != 'undefined' && this.preSelCurrent !== -1 ) {\n\t\t\tthis.current = this.preSelCurrent;\n\t\t\tthis.preSelCurrent = -1;\n\t\t}\n\n\t\t// current option\n\t\tvar opt = this.selOpts[ this.current ];\n\n\t\t// update current selected value\n\t\tthis.selPlaceholder.textContent = opt.textContent;\n\t\t\n\t\t// change native select element´s value\n\t\tthis.el.value = opt.getAttribute( 'data-value' );\n\n\t\t// remove class cs-selected from old selected option and add it to current selected option\n\t\tvar oldOpt = this.selEl.querySelector( 'li.cs-selected' );\n\t\tif( oldOpt ) {\n\t\t\tclassie.remove( oldOpt, 'cs-selected' );\n\t\t}\n\t\tclassie.add( opt, 'cs-selected' );\n\n\t\t// if there´s a link defined\n\t\tif( opt.getAttribute( 'data-link' ) ) {\n\t\t\t// open in new tab?\n\t\t\tif( this.options.newTab ) {\n\t\t\t\twindow.open( opt.getAttribute( 'data-link' ), '_blank' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\twindow.location = opt.getAttribute( 'data-link' );\n\t\t\t}\n\t\t}\n\n\t\t// callback\n\t\tthis.options.onChange( this.el.value );\n\t}\n\n\t/**\n\t * returns true if select element is opened\n\t */\n\tSelectFx.prototype._isOpen = function(opt) {\n\t\treturn classie.has( this.selEl, 'cs-active' );\n\t}\n\n\t/**\n\t * removes the focus class from the option\n\t */\n\tSelectFx.prototype._removeFocus = function(opt) {\n\t\tvar focusEl = this.selEl.querySelector( 'li.cs-focus' )\n\t\tif( focusEl ) {\n\t\t\tclassie.remove( focusEl, 'cs-focus' );\n\t\t}\n\t}\n\n\t/**\n\t * add to global namespace\n\t */\n\twindow.SelectFx = SelectFx;\n\n} )( window );"]}